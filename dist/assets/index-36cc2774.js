/* empty css             *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                        *//* empty css                   */import{ad as p,d as M,a as v,r as U,aq as A,P as F,ae as N,o as c,e as j,f as a,w as t,M as b,z as g,i as r,x as H,v as I,af as y,ag as L,p as R,ah as S,ai as G,aa as J,m as K,n as Q,q as W,an as X}from"./index-bf8d9e9a.js";const Y=()=>p.get("/admin/acl/permission"),Z=n=>n.id?p.put("/admin/acl/permission/update",n):p.post("/admin/acl/permission/save",n),ee=n=>p.delete("/admin/acl/permission/remove/"+n),le={class:"dialog-footer"},ae={name:"permission"},pe=M({...ae,setup(n){const C=v([]),i=v(!1),o=U({id:0,code:"",level:0,name:"",pid:0}),u=v(0),k=A(()=>{const e=o.id?"编辑":"增加",s=u.value===3?"功能":"菜单";return e+s}),x=async()=>{(await Z(o)).code===200&&(y.success({message:o.id?"编辑成功！":"添加成功！"}),i.value=!1,await _())},D=()=>{Object.assign(o,{id:0,code:"",level:0,name:"",pid:0})},h=e=>{u.value=e.level,Object.assign(o,e),i.value=!0},q=e=>{u.value=e.level,o.level=e.level+1,o.pid=e.id,i.value=!0};F(()=>{_()});const _=async()=>{const e=await Y();e.code===200&&(C.value=e.data)},w=async e=>{(await ee(e)).code===200&&(await _(),y.success({message:"删除成功！"}))};return(e,s)=>{const m=L,d=R,O=S,B=G,T=J,E=K,P=Q,$=W,z=X,f=N("permission-btn");return c(),j("div",null,[a(T,null,{default:t(()=>[a(B,{data:C.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[a(m,{prop:"name",label:"名称"}),a(m,{prop:"code",label:"权限值"}),a(m,{prop:"updateTime",label:"修改时间","show-overflow-tooltip":""}),a(m,{label:"操作",width:"260px"},{default:t(({row:l})=>[b((c(),g(d,{disabled:l.level===4,size:"small",onClick:V=>q(l)},{default:t(()=>[r(H(l.level===3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"])),[[f,"btn.Permission.add"]]),b((c(),g(d,{disabled:l.level===1,type:"primary",size:"small",onClick:V=>h(l)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["disabled","onClick"])),[[f,"btn.Permission.update"]]),a(O,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:V=>w(l.id)},{reference:t(()=>[b((c(),g(d,{disabled:l.level===1,type:"danger",size:"small"},{default:t(()=>[r(" 删除 ")]),_:2},1032,["disabled"])),[[f,"btn.Permission.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1}),a(z,{onClose:D,modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=l=>i.value=l),title:k.value},{footer:t(()=>[I("span",le,[a(d,{onClick:s[2]||(s[2]=l=>i.value=!1)},{default:t(()=>[r("取消")]),_:1}),a(d,{onClick:x,type:"primary"},{default:t(()=>[r(" 确定 ")]),_:1})])]),default:t(()=>[a($,null,{default:t(()=>[a(P,{label:"名称","label-width":140},{default:t(()=>[a(E,{modelValue:o.name,"onUpdate:modelValue":s[0]||(s[0]=l=>o.name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),a(P,{label:"权限值","label-width":140},{default:t(()=>[a(E,{modelValue:o.code,"onUpdate:modelValue":s[1]||(s[1]=l=>o.code=l),placeholder:"请输入权限值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}});export{pe as default};
