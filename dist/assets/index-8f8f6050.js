/* empty css             *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                    *//* empty css                *//* empty css                 *//* empty css                *//* empty css                      *//* empty css                        *//* empty css                  *//* empty css                   */import{ad as v,d as Q,a as u,r as W,P as X,ae as Y,o as f,e as x,f as e,w as o,M as U,z as h,i as T,g as i,v as N,ar as Z,af as p,p as ee,ag as ae,ah as te,ai as oe,aj as le,aa as re,m as se,n as ne,C as ie,as as de,q as ce,an as ue,_ as pe}from"./index-bf8d9e9a.js";const me=(n,c)=>v.get(`/admin/product/baseTrademark/${n}/${c}`),_e=n=>n.id?v.put("/admin/product/baseTrademark/update",n):v.post("/admin/product/baseTrademark/save",n),ge=n=>v.delete(`/admin/product/baseTrademark/remove/${n}`),fe=["src"],ve=["src"],ye={class:"dialog-footer"},be={name:"trademark"},ke=Q({...be,setup(n){const c=u(1),y=u(3),C=u(0),m=u(),d=u(!1);let b=u([]),l=W({id:0,tmName:"",logoUrl:""});const z=()=>{d.value=!1},V=()=>{l.tmName="",l.logoUrl="",m.value.clearValidate("tmName"),m.value.clearValidate("logoUrl")},M=async()=>{await m.value.validate(),(await _e(l)).code===200?(await _(),p({type:"success",message:l.id?"修改品牌成功！":"添加品牌成功！"}),d.value=!1):p({type:"error",message:l.id?"修改品牌失败！":"添加品牌失败！"})},w=()=>{l.id=0,d.value=!0},$=a=>{d.value=!0,Object.assign(l,a)},q=async a=>{(await ge(a)).code===200?(await _(),p({type:"success",message:"删除成功！"}),d.value=!1):p({type:"error",message:"删除失败！"})},_=async()=>{const a=await me(c.value,y.value);a.code===200&&(b.value=a.data.records,C.value=a.data.total,b.value.forEach(t=>{t.logoUrl.includes("http://")||(t.logoUrl="http://"+t.logoUrl)}))};X(()=>{_()});const D=()=>{_()},P=()=>{c.value=1,_()},j=(a,t)=>{l.logoUrl=a.data,m.value.clearValidate("logoUrl")},I=a=>a.type!=="images/jpeg"&&a.type!=="images/png"&&a.type!=="images/gif"?(p.error("上传的文件类型必须是图片格式！"),!1):a.size/1024/1024>4?(p.error("上传的文件大小应小于4M！"),!1):!0,S={tmName:[{required:!0,trigger:"blur",validator:(a,t,s)=>{t.length<2?s(new Error("品牌名称长度至少要大于一位！")):s()}}],logoUrl:[{required:!0,trigger:"change",validator:(a,t,s)=>{t?s():s(new Error("请上传品牌logo图片！"))}}]};return(a,t)=>{const s=ee,g=ae,A=te,B=oe,F=le,R=re,L=se,E=ne,O=ie,G=de,H=ce,J=ue,k=Y("permission-btn");return f(),x("div",null,[e(R,{class:"box-card"},{default:o(()=>[U((f(),h(s,{type:"primary",size:"default",onClick:w,icon:"Plus"},{default:o(()=>[T(" 添加品牌 ")]),_:1})),[[k,"btn.Trademark.add"]]),e(B,{style:{margin:"16px 0"},data:i(b),border:""},{default:o(()=>[e(g,{type:"index",label:"序号",width:"80",align:"center"}),e(g,{prop:"tmName",label:"品牌名称"}),e(g,{prop:"logoUrl",label:"品牌logo"},{default:o(({row:r})=>[N("img",{src:r.logoUrl,alt:"图片丢失",style:{width:"100px",height:"100px","object-fit":"contain"}},null,8,fe)]),_:1}),e(g,{label:"品牌操作"},{default:o(({row:r})=>[U(e(s,{type:"primary",size:"small",icon:"Edit",onClick:K=>$(r)},null,8,["onClick"]),[[k,"btn.Trademark.update"]]),e(A,{title:`确定要删除“${r.tmName}”吗?`,width:"250px",icon:"delete",onConfirm:K=>q(r.id)},{reference:o(()=>[U(e(s,{type:"danger",size:"small",icon:"Delete"},null,512),[[k,"btn.Trademark.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(F,{"current-page":c.value,"onUpdate:currentPage":t[0]||(t[0]=r=>c.value=r),"page-size":y.value,"onUpdate:pageSize":t[1]||(t[1]=r=>y.value=r),"page-sizes":[3,5,7,9],background:"",layout:"prev, pager, next, jumper, ->, sizes, total",total:C.value,onSizeChange:P,onCurrentChange:D},null,8,["current-page","page-size","total"])]),_:1}),e(J,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=r=>d.value=r),title:i(l).id?"修改品牌":"添加品牌",onClose:V},{footer:o(()=>[N("span",ye,[e(s,{type:"primary",onClick:z},{default:o(()=>[T("取消")]),_:1}),e(s,{type:"primary",onClick:M},{default:o(()=>[T("确定")]),_:1})])]),default:o(()=>[e(H,{ref_key:"ruleFormRef",ref:m,model:i(l),rules:S},{default:o(()=>[e(E,{label:"品牌名称",prop:"tmName"},{default:o(()=>[e(L,{modelValue:i(l).tmName,"onUpdate:modelValue":t[2]||(t[2]=r=>i(l).tmName=r)},null,8,["modelValue"])]),_:1}),e(E,{label:"品牌logo",prop:"logoUrl"},{default:o(()=>[e(G,{class:"avatar-uploader",action:"api/admin/product/fileUpload","show-file-list":!1,"on-success":j,"before-upload":I},{default:o(()=>[i(l).logoUrl?(f(),x("img",{key:0,src:i(l).logoUrl,class:"avatar",alt:"图片丢失了"},null,8,ve)):(f(),h(O,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[e(i(Z))]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const je=pe(ke,[["__scopeId","data-v-7910c9a6"]]);export{je as default};
